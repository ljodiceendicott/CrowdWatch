<!DOCTYPE html>
<html>
  <header>
    <!-- <script type="text/javascript" src="../data.json.json"></script>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    /> -->
    <link rel="stylesheet" href="../styles/normalize.css" />
    <link rel="stylesheet" href="../styles/main.css" />
    <link rel="stylesheet" href="../styles/dashboard.css" />

    <h1>PeopleWatch</h1>
    <h5><i>Beat the Crowd</i></h5>
    <h7>Senior Thesis By Luke Jodice '23</h7>
  </header>
  <nav id="nav_menu">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="manualUpdate.html">Manual Update</a></li>
      <li><a href="historicalData.html">Historical Data</a></li>
    </ul>
  </nav>
  <body>
    <h1>Dashboard</h1>
    <p>Last Updated:</p>
    <p id="date"></p>
    <div id="reloaded">
      <p id="values"></p>
      <table id="dash" class="sortable">
        <tbody></tbody>
      </table>
      <script>
        function reset(start) {
          var locations = [];
          var ts = document.getElementById("date");
          var values = document.getElementById("values");
          var dash = document.getElementById("dash");
          dash.innerHTML = "";
          values.innerHTML = "";
          fetch("/currentvalues")
            .then((response) => response.json())
            .then((data) => {
              for (var i = start; i < data.account.locations.length; i++) {
                var loc = data.account.locations[i];
                const location = {
                  name: loc.name,
                  maxCap: loc.maxCap,
                  count: loc.count,
                };
                locations.push(location);
                // values.innerHTML =
                //   values.innerHTML +
                //   "<br><br><br><br>" +
                //   location.name +
                //   "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count:" +
                //   location.count +
                //   "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max Capacity" +
                //   location.maxCap;
                console.log(data.account.locations[i]);
              }
              dash.innerHTML =
                '<thead> <tr><th onclick="sortTable(0)">Name</th><th onclick="sortTable(1)">count</th></tr></thead><tbody>';
              for (var i = 0; i < locations.length; i++) {
                var row =
                  "<tr><td>" +
                  locations[i].name +
                  "</td><td>" +
                  locations[i].count +
                  "</td></tr>";
                dash.innerHTML += row;
              }
              dash.innerHTML = dash.innerHTML + "</tbody>";
              console.log(locations);
              ts.innerHTML = data.TimeStamp;
            });
        }
        function sortTable(n) {
          if (n == 0) {
          }
        }
        reset(0);
      </script>
      <button onClick="reset(0)">Refresh</button>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
      <script>
        $("button").on("click", function () {
          $("#reloaded").load(" #reloaded");
          console.log(data);
          alert("reset");
        });
      </script>
    </div>
  </body>
</html>
